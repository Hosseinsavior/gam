<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fruit Catcher Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        .game-object {
            position: absolute;
            transition: transform 0.1s;
            user-select: none;
        }
        .explosion {
            position: absolute;
            background: radial-gradient(circle, rgba(255,200,0,0.8) 0%, rgba(255,100,0,0.6) 50%, rgba(255,0,0,0) 70%);
            border-radius: 50%;
            transform: scale(0);
            opacity: 1;
            animation: explode 0.5s forwards;
        }
        @keyframes explode {
            to {
                transform: scale(3);
                opacity: 0;
            }
        }
        .shake {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="bg-gradient-to-b from-blue-400 to-blue-600 min-h-screen overflow-hidden font-sans">
    <div class="container mx-auto px-4 py-8">
        <!-- Game Title -->
        <h1 class="text-5xl font-bold text-center text-white mb-2 floating">üçé Fruit Catcher üçå</h1>
        <p class="text-center text-white mb-8">Catch the fruits, avoid the bombs, grab the stars!</p>
        
        <!-- Game Info -->
        <div class="flex justify-between items-center mb-4 px-4">
            <div class="bg-white bg-opacity-20 rounded-lg p-3">
                <p class="text-white font-bold" aria-live="polite">Score: <span id="score" class="text-yellow-300">0</span></p>
            </div>
            <div class="bg-white bg-opacity-20 rounded-lg p-3">
                <p class="text-white font-bold" aria-live="polite">High Score: <span id="high-score" class="text-yellow-300">0</span></p>
            </div>
            <div class="bg-white bg-opacity-20 rounded-lg p-3">
                <p class="text-white font-bold" aria-live="polite">Lives: <span id="lives" class="text-red-300">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span></p>
            </div>
            <div class="bg-white bg-opacity-20 rounded-lg p-3">
                <p class="text-white font-bold" aria-live="polite">Level: <span id="level" class="text-green-300">1</span></p>
            </div>
        </div>
        
        <!-- Game Area -->
        <div id="game-area" class="relative bg-blue-300 bg-opacity-30 rounded-xl border-4 border-blue-400 h-96 w-full overflow-hidden">
            <!-- Player Basket -->
            <div id="basket" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 w-24 h-16 bg-gradient-to-r from-amber-700 to-amber-900 rounded-lg flex justify-center items-center">
                <div class="w-full h-4 bg-amber-800 rounded-b-lg absolute -bottom-4"></div>
                <div class="w-4 h-8 bg-amber-900 rounded-full absolute -bottom-8 left-4"></div>
                <div class="w-4 h-8 bg-amber-900 rounded-full absolute -bottom-8 right-4"></div>
            </div>
            
            <!-- Start Screen -->
            <div id="start-screen" class="absolute inset-0 flex flex-col justify-center items-center bg-black bg-opacity-70 text-white">
                <h2 class="text-4xl font-bold mb-6">Fruit Catcher</h2>
                <p class="text-xl mb-8 text-center px-4">Use your mouse or arrow keys to move the basket.<br>Catch fruits for points, avoid bombs, grab stars for extra lives!</p>
                <button id="start-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full text-xl transition-all transform hover:scale-105">
                    Start Game
                </button>
                <div class="mt-8 flex space-x-4">
                    <div class="text-center">
                        <div class="text-4xl">üçé</div>
                        <div class="text-sm">+10 pts</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl">üçå</div>
                        <div class="text-sm">+15 pts</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl">üçí</div>
                        <div class="text-sm">+20 pts</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl">üí£</div>
                        <div class="text-sm">-1 life</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl">‚≠ê</div>
                        <div class="text-sm">+1 life</div>
                    </div>
                </div>
            </div>
            
            <!-- Game Over Screen -->
            <div id="game-over" class="absolute inset-0 flex flex-col justify-center items-center bg-black bg-opacity-70 text-white hidden">
                <h2 class="text-4xl font-bold mb-4">Game Over!</h2>
                <p class="text-2xl mb-2">Your score: <span id="final-score" class="text-yellow-300">0</span></p>
                <p class="text-xl mb-2">High score: <span id="final-high-score" class="text-yellow-300">0</span></p>
                <p class="text-xl mb-6">Level reached: <span id="final-level" class="text-green-300">1</span></p>
                <button id="restart-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-full text-xl transition-all transform hover:scale-105">
                    Play Again
                </button>
            </div>
        </div>
        
        <!-- Controls -->
        <div class="mt-6 text-center text-white">
            <p>Controls: Mouse, Touch, or Arrow Keys (‚Üê ‚Üí)</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Game elements
            const gameArea = document.getElementById('game-area');
            const basket = document.getElementById('basket');
            const scoreDisplay = document.getElementById('score');
            const highScoreDisplay = document.getElementById('high-score');
            const livesDisplay = document.getElementById('lives');
            const levelDisplay = document.getElementById('level');
            const startScreen = document.getElementById('start-screen');
            const gameOverScreen = document.getElementById('game-over');
            const startBtn = document.getElementById('start-btn');
            const restartBtn = document.getElementById('restart-btn');
            const finalScoreDisplay = document.getElementById('final-score');
            const finalHighScoreDisplay = document.getElementById('final-high-score');
            const finalLevelDisplay = document.getElementById('final-level');

            // Configuration
            const config = {
                initialSpawnRate: 1500,
                initialObjectSpeed: 3,
                minSpawnRate: 500,
                levelUpInterval: 15000,
                basketMoveAmount: 20,
                maxLives: 3,
                backgroundColors: [
                    'bg-blue-300 bg-opacity-30',
                    'bg-green-300 bg-opacity-30',
                    'bg-purple-300 bg-opacity-30',
                    'bg-red-300 bg-opacity-30'
                ]
            };

            // Game state
            let score = 0;
            let highScore = localStorage.getItem('highScore') || 0;
            let lives = config.maxLives;
            let level = 1;
            let gameRunning = false;
            let basketPosition = gameArea.offsetWidth / 2 - basket.offsetWidth / 2;
            let basketWidth = basket.offsetWidth;
            let gameAreaWidth = gameArea.offsetWidth;
            let gameAreaHeight = gameArea.offsetHeight;
            let fallingObjects = [];
            let objectPool = [];
            let objectInterval;
            let speedInterval;
            let objectSpeed = config.initialObjectSpeed;
            let spawnRate = config.initialSpawnRate;

            // Audio
            const fruitSound = new Audio('fruit-catch.mp3');
            const bombSound = new Audio('bomb-explosion.mp3');
            const gameStartSound = new Audio('game-start.mp3');
            const gameOverSound = new Audio('game-over.mp3');

            // Fruits, bombs, and special items
            const fruits = [
                { emoji: 'üçé', value: 10, color: 'bg-red-500' },
                { emoji: 'üçå', value: 15, color: 'bg-yellow-400' },
                { emoji: 'üçí', value: 20, color: 'bg-red-600' },
                { emoji: 'üçä', value: 12, color: 'bg-orange-500' },
                { emoji: 'üçì', value: 18, color: 'bg-pink-500' }
            ];
            const bombs = [
                { emoji: 'üí£', penalty: 1, color: 'bg-gray-700' }
            ];
            const specials = [
                { emoji: '‚≠ê', extraLife: 1, color: 'bg-yellow-600' }
            ];

            // Object Pooling
            function getObjectFromPool() {
                if (objectPool.length > 0) {
                    const obj = objectPool.pop();
                    obj.style.display = 'block';
                    return obj;
                }
                return document.createElement('div');
            }

            function returnObjectToPool(obj) {
                if (obj && obj.parentNode) {
                    obj.style.display = 'none';
                    objectPool.push(obj);
                }
            }

            // Initialize game
            function initGame() {
                score = 0;
                lives = config.maxLives;
                level = 1;
                objectSpeed = config.initialObjectSpeed;
                spawnRate = config.initialSpawnRate;
                scoreDisplay.textContent = score;
                highScoreDisplay.textContent = highScore;
                livesDisplay.textContent = '‚ù§Ô∏è'.repeat(lives);
                levelDisplay.textContent = level;
                basketPosition = gameAreaWidth / 2 - basketWidth / 2;
                basket.style.left = `${basketPosition}px`;
                gameArea.className = `relative ${config.backgroundColors[0]} rounded-xl border-4 border-blue-400 h-96 w-full overflow-hidden`;

                // Clear existing objects
                fallingObjects.forEach(obj => returnObjectToPool(obj.element));
                fallingObjects = [];

                // Clear intervals
                clearInterval(objectInterval);
                clearInterval(speedInterval);
            }

            // Start game
            function startGame() {
                initGame();
                gameRunning = true;
                startScreen.classList.add('hidden');
                gameOverScreen.classList.add('hidden');
                gameStartSound.play();

                // Start spawning objects
                objectInterval = setInterval(createFallingObject, spawnRate);

                // Gradually increase difficulty
                speedInterval = setInterval(() => {
                    level++;
                    levelDisplay.textContent = level;
                    objectSpeed += 0.5;
                    spawnRate = Math.max(config.minSpawnRate, spawnRate - 100);
                    gameArea.className = `relative ${config.backgroundColors[(level - 1) % config.backgroundColors.length]} rounded-xl border-4 border-blue-400 h-96 w-full overflow-hidden`;

                    // Reset interval with new spawn rate
                    clearInterval(objectInterval);
                    objectInterval = setInterval(createFallingObject, spawnRate);
                }, config.levelUpInterval);
            }

            // Game over
            function endGame() {
                gameRunning = false;
                clearInterval(objectInterval);
                clearInterval(speedInterval);
                if (score > highScore) {
                    highScore = score;
                    localStorage.setItem('highScore', highScore);
                    highScoreDisplay.textContent = highScore;
                }
                finalScoreDisplay.textContent = score;
                finalHighScoreDisplay.textContent = highScore;
                finalLevelDisplay.textContent = level;
                gameOverScreen.classList.remove('hidden');
                gameOverSound.play();
            }

            // Create falling objects
            function createFallingObject() {
                if (!gameRunning) return;

                // 20% bomb, 5% special, 75% fruit
                const rand = Math.random();
                let objectType;
                if (rand < 0.2) {
                    objectType = bombs[Math.floor(Math.random() * bombs.length)];
                } else if (rand < 0.25) {
                    objectType = specials[Math.floor(Math.random() * specials.length)];
                } else {
                    objectType = fruits[Math.floor(Math.random() * fruits.length)];
                }

                const object = getObjectFromPool();
                object.className = `game-object text-3xl flex items-center justify-center rounded-full w-12 h-12 ${objectType.color}`;
                object.textContent = objectType.emoji;

                // Random horizontal position
                const xPos = Math.random() * (gameAreaWidth - 50);
                object.style.left = `${xPos}px`;
                object.style.top = '-50px';

                gameArea.appendChild(object);

                const newObject = {
                    element: object,
                    x: xPos,
                    y: -50,
                    width: 50,
                    height: 50,
                    value: objectType.value || 0,
                    penalty: objectType.penalty || 0,
                    extraLife: objectType.extraLife || 0,
                    speed: objectSpeed + (Math.random() * 2 - 1)
                };

                fallingObjects.push(newObject);
            }

            // Update game state
            function updateGame() {
                if (!gameRunning) return;

                fallingObjects.forEach((obj, index) => {
                    obj.y += obj.speed;
                    obj.element.style.top = `${obj.y}px`;

                    // Check if object is caught by basket
                    if (
                        obj.y + obj.height >= gameAreaHeight - 80 &&
                        obj.y <= gameAreaHeight - 40 &&
                        obj.x + obj.width >= basketPosition &&
                        obj.x <= basketPosition + basketWidth
                    ) {
                        if (obj.penalty) {
                            // Bomb
                            lives -= obj.penalty;
                            livesDisplay.textContent = '‚ù§Ô∏è'.repeat(Math.max(0, lives)) + '‚ô°'.repeat(Math.max(0, config.maxLives - lives));
                            bombSound.play();

                            // Explosion effect
                            const explosion = getObjectFromPool();
                            explosion.className = 'explosion';
                            explosion.style.left = `${obj.x + obj.width/2 - 15}px`;
                            explosion.style.top = `${obj.y + obj.height/2 - 15}px`;
                            explosion.style.width = '30px';
                            explosion.style.height = '30px';
                            gameArea.appendChild(explosion);

                            setTimeout(() => returnObjectToPool(explosion), 500);

                            // Shake basket
                            basket.classList.add('shake');
                            setTimeout(() => basket.classList.remove('shake'), 500);

                            if (lives <= 0) {
                                endGame();
                            }
                        } else if (obj.extraLife) {
                            // Special item (extra life)
                            lives = Math.min(config.maxLives, lives + obj.extraLife);
                            livesDisplay.textContent = '‚ù§Ô∏è'.repeat(lives) + '‚ô°'.repeat(config.maxLives - lives);
                            fruitSound.play();
                        } else {
                            // Fruit
                            score += obj.value;
                            scoreDisplay.textContent = score;
                            fruitSound.play();

                            // Floating score effect
                            const scoreEffect = getObjectFromPool();
                            scoreEffect.className = 'absolute text-yellow-300 font-bold text-xl';
                            scoreEffect.textContent = `+${obj.value}`;
                            scoreEffect.style.left = `${obj.x + obj.width/2 - 15}px`;
                            scoreEffect.style.top = `${obj.y - 20}px`;
                            gameArea.appendChild(scoreEffect);

                            setTimeout(() => {
                                scoreEffect.style.transition = 'all 0.5s';
                                scoreEffect.style.opacity = '0';
                                scoreEffect.style.transform = 'translateY(-30px)';
                                setTimeout(() => returnObjectToPool(scoreEffect), 500);
                            }, 0);
                        }

                        returnObjectToPool(obj.element);
                        fallingObjects.splice(index, 1);
                    }

                    // Remove object if it falls past the bottom
                    if (obj.y > gameAreaHeight) {
                        returnObjectToPool(obj.element);
                        fallingObjects.splice(index, 1);
                    }
                });

                requestAnimationFrame(updateGame);
            }

            // Handle keyboard controls
            function handleKeyDown(e) {
                if (!gameRunning) return;

                if (e.key === 'ArrowLeft' || e.key === 'a') {
                    basketPosition = Math.max(0, basketPosition - config.basketMoveAmount);
                } else if (e.key === 'ArrowRight' || e.key === 'd') {
                    basketPosition = Math.min(gameAreaWidth - basketWidth, basketPosition + config.basketMoveAmount);
                }

                basket.style.left = `${basketPosition}px`;
            }

            // Handle mouse/touch controls
            function handleMouseMove(e) {
                if (!gameRunning) return;

                const rect = gameArea.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;

                basketPosition = Math.max(0, Math.min(mouseX - basketWidth / 2, gameAreaWidth - basketWidth));
                basket.style.left = `${basketPosition}px`;
            }

            // Resize handling
            const resizeObserver = new ResizeObserver(() => {
                gameAreaWidth = gameArea.offsetWidth;
                basketWidth = basket.offsetWidth;
                basketPosition = Math.min(basketPosition, gameAreaWidth - basketWidth);
                basket.style.left = `${basketPosition}px`;
                gameAreaHeight = gameArea.offsetHeight;
            });
            resizeObserver.observe(gameArea);

            // Event listeners
            startBtn.addEventListener('click', () => {
                startGame();
                updateGame();
            });

            restartBtn.addEventListener('click', () => {
                startGame();
                updateGame();
            });

            document.addEventListener('keydown', handleKeyDown);
            gameArea.addEventListener('mousemove', handleMouseMove);
            gameArea.addEventListener('touchmove', (e) => {
                const rect = gameArea.getBoundingClientRect();
                const touch = e.touches[0];
                if (touch.clientX >= rect.left && touch.clientX <= rect.right &&
                    touch.clientY >= rect.top && touch.clientY <= rect.bottom) {
                    e.preventDefault();
                    handleMouseMove(touch);
                }
            });

            // Initial setup
            highScoreDisplay.textContent = highScore;
            basket.style.left = `${basketPosition}px`;
        });
    </script>
</body>
</html>
